(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fa5c7c8"],{"024a":function(t,e,a){},"43ca":function(t,e,a){"use strict";var s=a("024a"),n=a.n(s);n.a},"46c4":function(t,e,a){"use strict";var s=a("b970"),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom";Object(s["b"])({message:t,duration:e,position:a})},i=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=s["a"].alert({title:t,message:e,overlay:a,closeOnClickOverlay:!0});return n},o=function(t,e){var a=s["a"].confirm({title:t,message:e});return a},r={toastMessage:n,dialogAlert:i,dialogConfirm:o};e["a"]=r},d64c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{attrs:{id:"signinContainer"}},[t._m(0),a("div",{staticClass:"centerContainer",attrs:{id:"inputContainer"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tele,expression:"tele"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.tele},on:{input:function(e){e.target.composing||(t.tele=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],attrs:{type:"text",placeholder:"请输入昵称"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],attrs:{type:"password",placeholder:"请输入确认密码"},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmCode,expression:"confirmCode"}],staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.confirmCode},on:{input:function(e){e.target.composing||(t.confirmCode=e.target.value)}}}),a("canvas",{ref:"mycanvas",staticStyle:{"margin-left":"10px"},attrs:{id:"mycanvas",width:t.canvasWidth,height:t.canvasHeight},on:{click:t.createCode}})]),a("div",{staticClass:"centerContainer",attrs:{id:"buttonContainer"}},[a("van-button",{staticClass:"centerContainer",attrs:{id:"signinbutton",size:"small",round:""},on:{click:t.goBack}},[t._v("返回")]),a("van-button",{staticClass:"centerContainer",attrs:{id:"signinbutton",size:"small",round:""},on:{click:t.signup}},[t._v("注册")])],1)]),a("div",{staticClass:"centerContainer"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.isBusy,expression:"isBusy"}],attrs:{id:"loadIndicator"}})],1)])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"centerContainer",attrs:{id:"logoContainer"}},[s("img",{attrs:{src:a("f0d5")}})])}],i=a("c665"),o=a("dc0a"),r=a("aa9a"),c=a("d328"),l=a("11d9"),d=a("9ab4"),u=a("2b0e"),v=a("60a3"),m=a("46c4"),h=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.isBusy=!1,t.verificationCode="",t.tele="",t.password="",t.confirmPassword="",t.confirmCode="",t.nickname="",t.canvasWidth=90,t.canvasHeight=30,t}return Object(r["a"])(e,[{key:"mounted",value:function(){this.createCode()}},{key:"signup",value:function(){var t=this;this.checkUserInput()&&(this.isBusy=!0,this.$Api.invoke({moduleName:"crm.permission.signupService",className:"SignupService",method:"signup",args:{telephone:this.tele,name:this.nickname,password:this.password}}).then(function(e){e.data&&e.data.isSuccess?m["a"].dialogAlert("提示","注册成功!").then(function(){t.goBack()}):(m["a"].toastMessage("注册失败!"+e.data.error,2e3),console.log(e))}).catch(function(t){m["a"].toastMessage("注册异常!"+t,2e3),console.log(t)}).finally(function(){t.isBusy=!1}))}},{key:"goBack",value:function(){this.$router.back()}},{key:"rand",value:function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",e=t.split(""),a=Math.floor(36*Math.random()),s=e[a];return s}},{key:"drawline",value:function(t,e){e.beginPath(),e.moveTo(Math.floor(Math.random()*this.canvasWidth),Math.floor(Math.random()*this.canvasHeight)),e.lineTo(Math.floor(Math.random()*this.canvasWidth),Math.floor(Math.random()*this.canvasHeight)),e.lineWidth=1,e.strokeStyle="#275DB3",e.stroke()}},{key:"createCode",value:function(){var t="",e=this.$refs.mycanvas,a=e.getContext("2d");a.clearRect(0,0,this.canvasWidth,this.canvasHeight),a.strokeStyle="#FFF",a.strokeRect(0,0,this.canvasWidth,this.canvasHeight);for(var s=0;s<20;s++)this.drawline(e,a);for(var n=0;n<4;n++){a.font="20px Arial",a.save();var i=1-2*Math.random(),o=i/8,r=this.rand();a.rotate(o),a.fillText(r,18*n+4,25),a.restore(),t+=r}this.verificationCode=t}},{key:"checkUserInput",value:function(){var t=/^1[3456789]\d{9}$/;return this.tele?t.test(this.tele)?this.nickname?this.password&&this.confirmPassword?this.password!==this.confirmPassword?(m["a"].toastMessage("密码和确认密码不一致!"),!1):this.confirmCode?this.confirmCode.toUpperCase()===this.verificationCode||(m["a"].toastMessage("验证码输入错误!"),!1):(m["a"].toastMessage("验证码不能为空!"),!1):(m["a"].toastMessage("密码或确认密码不能为空!"),!1):(m["a"].toastMessage("昵称不能为空!"),!1):(m["a"].toastMessage("请输入有效的手机号码"),!1):(m["a"].toastMessage("手机号不能为空!"),!1)}}]),Object(o["a"])(e,t),e}(u["default"]);h=d["a"]([v["a"]],h);var p=h,f=p,g=f,w=(a("43ca"),a("2877")),C=Object(w["a"])(g,s,n,!1,null,"02221194",null);C.options.__file="signup.vue";e["default"]=C.exports},f0d5:function(t,e,a){t.exports=a.p+"static/img/sns.28d88920.png"}}]);