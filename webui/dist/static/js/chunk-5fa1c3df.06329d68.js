(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fa1c3df"],{"09ba":function(t,e,a){},"0bfb":function(t,e,a){"use strict";var i=a("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"11e9":function(t,e,a){var i=a("52a7"),n=a("4630"),s=a("6821"),o=a("6a99"),r=a("69a8"),c=a("c69a"),l=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?l:function(t,e){if(t=s(t),e=o(e,!0),c)try{return l(t,e)}catch(t){}if(r(t,e))return n(!i.f.call(t,e),t[e])}},"133e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAcUlEQVRYw+3XMQqAMAyF4d7MS2hzK0/WMXgXpRBT6GgWkZfBN/yEDoVvTIqZlcwKAW8+LW0fVU+9c87xhgFWzx6qKIAGAEUBegDoKIBFEUAAAQQQQAABBPwGkL6SpS+lWwAQ5GEi3uFdcwrsMOFt+GU3b/2iKWSc49cAAAAASUVORK5CYII="},"3b2b":function(t,e,a){var i=a("7726"),n=a("5dbc"),s=a("86cc").f,o=a("9093").f,r=a("aae3"),c=a("0bfb"),l=i.RegExp,u=l,m=l.prototype,f=/a/g,d=/a/g,p=new l(f)!==f;if(a("9e1e")&&(!p||a("79e5")(function(){return d[a("2b4c")("match")]=!1,l(f)!=f||l(d)==d||"/a/i"!=l(f,"i")}))){l=function(t,e){var a=this instanceof l,i=r(t),s=void 0===e;return!a&&i&&t.constructor===l&&s?t:n(p?new u(i&&!s?t.source:t,e):u((i=t instanceof l)?t.source:t,i&&s?c.call(t):e),a?this:m,l)};for(var h=function(t){t in l||s(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},b=o(u),v=0;b.length>v;)h(b[v++]);m.constructor=l,l.prototype=m,a("2aba")(i,"RegExp",l)}a("7a56")("RegExp")},"3bbd8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"crmLable"},[a("div",{staticClass:"cellTitle van-hairline--bottom"},[a("span",[t._v(t._s(t.title))]),a("div",{staticClass:"cellContent"},[t._t("default",[a("span",[t._v(t._s(t.content?t.content:"-"))])])],2)])])},n=[],s=a("c665"),o=a("dc0a"),r=a("d328"),c=a("11d9"),l=a("9ab4"),u=a("2b0e"),m=a("60a3"),f=function(t){function e(){return Object(s["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(u["default"]);l["a"]([Object(m["d"])({default:""}),l["b"]("design:type",String)],f.prototype,"title",void 0),l["a"]([Object(m["d"])({default:""}),l["b"]("design:type",String)],f.prototype,"content",void 0),f=l["a"]([m["a"]],f);var d=f,p=d,h=p,b=(a("d956"),a("2877")),v=Object(b["a"])(h,i,n,!1,null,"494a7b4c",null);v.options.__file="crmLabel.vue";e["a"]=v.exports},"3cda":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alignCenter width100"},[a("van-loading",{staticStyle:{display:"inline-block"}})],1)},n=[],s=a("c665"),o=a("dc0a"),r=a("d328"),c=a("11d9"),l=a("9ab4"),u=a("2b0e"),m=a("60a3"),f=function(t){function e(){return Object(s["a"])(this,e),Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),e}(u["default"]);f=l["a"]([m["a"]],f);var d=f,p=d,h=p,b=(a("6e19"),a("2877")),v=Object(b["a"])(h,i,n,!1,null,"04a46e72",null);v.options.__file="crmLoading.vue";e["a"]=v.exports},"428d":function(t,e,a){"use strict";var i=a("baf6"),n=a.n(i);n.a},"46c4":function(t,e,a){"use strict";var i=a("b970"),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom";Object(i["b"])({message:t,duration:e,position:a})},s=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=i["a"].alert({title:t,message:e,overlay:a,closeOnClickOverlay:!0});return n},o=function(t,e){var a=i["a"].confirm({title:t,message:e});return a},r={toastMessage:n,dialogAlert:s,dialogConfirm:o};e["a"]=r},"506a":function(t,e,a){"use strict";var i=a("09ba"),n=a.n(i);n.a},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,a){var i=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var s,o=e.constructor;return o!==a&&"function"==typeof o&&(s=o.prototype)!==a.prototype&&i(s)&&n&&n(t,s),t}},"6e19":function(t,e,a){"use strict";var i=a("82b3"),n=a.n(i);n.a},"736f":function(t,e,a){},"7f6f":function(t,e){t.exports="data:image/png;base64,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"},"82b3":function(t,e,a){},"893b":function(t,e,a){},"8b97":function(t,e,a){var i=a("d3f4"),n=a("cb7c"),s=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,a){return s(t,a),e?t.__proto__=a:i(t,a),t}}({},!1):void 0),check:s}},9093:function(t,e,a){var i=a("ce10"),n=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},9290:function(t,e,a){"use strict";a("3b2b"),a("a481");var i=function(t,e){if(!t)return"";"string"===typeof t&&(t=new Date(t)),/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in a){var s=a[i]+"";new RegExp("(".concat(i,")")).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?s:n(s)))}return e};function n(t){return("00"+t).substr(t.length)}var s=function(t){if(!t)return"暂无拜访信息";"string"===typeof t&&(t=new Date(t));var e=new Date,a=Math.abs(e.getTime()-t.getTime()),i=Math.floor(a/864e5);return i>99&&(i=99),0===i?"今日已拜访":1===i?"昨日已拜访":i+"天未拜访"},o=function(t){return t?"拜访中":"已完成"},r=function(t,e){if(!t)return"--";if(!e)return i(t,"hh:mm:ss");t=new Date(t),e=new Date(e);var a=Math.abs(t.getTime()-e.getTime()),n=Math.floor(a/36e5),s=Math.floor(a%36e5/6e4);return n+"小时"+s+"分钟"},c=function(t,e){if(!t||!e)return"--";t=new Date(t),e=new Date(e);var a=Math.abs(t.getTime()-e.getTime()),i=Math.floor(a/36e5),n=Math.floor(a%36e5/6e4);return i+"小时"+n+"分钟"},l=function(t){if(!t)return"--";t=new Date(t);var e=new Date;if(p(t,e))return"今天";var a=new Date(e.setDate(e.getDate()-1));return p(t,a)?"昨天":i(t,"yyyy-MM-dd")},u=function(t){return t&&"--"!==t?"今天"===t?"#ED340D":"昨天"===t?"#F68A1E":"#b2b2b2":"#b2b2b2"},m=function(t){return t?1==t?"一般":2==t?"高":"未知":"未知"},f=function(t){return t?1==t?"新建":2==t?"处理中":3==t?"已结束":"未知":"未知"},d=function(t){return t?1==t?"#3fcc8e":2==t?"#47EA1B":"#b2b2b2":"#b2b2b2"},p=function(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},h=function(t){if(""===t||null===t||void 0===t||-1===t)return"--m";if("number"!==typeof t&&(t=parseFloat(t)),t<1e3)return t.toFixed(0)+" m";var e=(t/1e3).toFixed(1);return e+" km"},b=function(t){return t||"--"},v=function(t){return t?"在职":"离职"},y={formatDateTime:i,formatVisitDays:s,formatDistance:h,formatCustomerLevel:b,formatIncumbent:v,formatVisitState:o,formatVisitTime:r,formatVisitDuration:c,formatVisitDate:l,dateEquals:p,formatVisitDateColor:u,formatItemLevel:m,formatItemState:f,formatItemStateColor:d};e["a"]=y},a61e:function(t,e,a){"use strict";var i=a("893b"),n=a.n(i);n.a},aae3:function(t,e,a){var i=a("d3f4"),n=a("2d95"),s=a("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},b3d5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-nav-bar",{staticClass:"headBar fixedHeader",on:{"click-left":t.goBack}},[i("span",{staticClass:"icon iconfont icon-fanhui headBarIcon",attrs:{slot:"left"},slot:"left"}),i("span",{staticClass:"headBarTitle",attrs:{slot:"title"},slot:"title"},[t._v("客户详情")])]),i("van-tabs",{staticClass:"content contentTop content-Bottom",attrs:{id:"contentContainer","line-width":80,color:"#3fcc8e",swipeable:""}},[i("van-tab",{attrs:{title:"基本信息"}},[i("crmLoading",{directives:[{name:"show",rawName:"v-show",value:t.isBusy,expression:"isBusy"}],staticStyle:{padding:"5px 0px"}}),i("div",{staticClass:"vanTabContentContainer",style:{height:t.tabContentHeight+"px"}},[i("crmLabel",{attrs:{title:"客户名称",content:t.customerDetails.Name}}),i("crmLabel",{attrs:{title:"客户编码",content:t.customerDetails.Cd}}),i("crmLabel",{attrs:{title:"客户简称",content:t.customerDetails.SimpleName}}),i("crmLabel",{attrs:{title:"地址",content:t.customerDetails.Address}}),i("crmLabel",{attrs:{title:"位置描述",content:t.customerDetails.LocationDesc}}),i("crmLabel",{attrs:{title:"电话",content:t.customerDetails.Telephone}}),i("crmLabel",{attrs:{title:"传真",content:t.customerDetails.Fax}}),i("crmLabel",{attrs:{title:"管理公司",content:t.customerDetails.ManagementCompany}}),i("crmLabel",{attrs:{title:"客户等级",content:t.customerDetails.Level}}),i("crmLabel",{attrs:{title:"开发进度",content:t.customerDetails.DevelopProgress}}),i("crmLabel",{attrs:{title:"客户行业分类",content:t.customerDetails.IndustryCategory}}),i("crmLabel",{attrs:{title:"客户主要产品",content:t.customerDetails.MainProduction}}),i("crmLabel",{attrs:{title:"客户兴趣爱好",content:t.customerDetails.Hobbies}}),i("crmLabel",{attrs:{title:"客户账期",content:t.customerDetails.AccountPeriod}}),i("crmLabel",{attrs:{title:"客户信用 ",content:t.customerDetails.CreditSituation}}),i("crmLabel",{attrs:{title:"合同约定 ",content:t.customerDetails.ContractAgreement}}),i("crmLabel",{attrs:{title:"客户规模 ",content:t.customerDetails.BusinessScale}}),i("crmLabel",{attrs:{title:"竞争情况",content:t.customerDetails.CompetitorSituation}}),i("crmLabel",{attrs:{title:"竞争分析",content:t.customerDetails.CompetitorAnalysis}}),i("crmLabel",{attrs:{title:"备注 ",content:t.customerDetails.Remark}}),i("div",{staticClass:"contactContainer"},[i("div",{staticClass:"contactTitle van-hairline--bottom"},[i("div",{staticClass:"createHeader flexRowLayout van-hairline--bottom"},[i("div",{staticClass:"flexRowLayout",staticStyle:{"justify-content":"flex-start"}},[i("img",{attrs:{src:a("133e")}}),i("span",{staticClass:"headerText"},[t._v("客户联系人")])]),i("div",{staticClass:"headerCreateBtn",on:{click:t.goCreateContact}},[i("span",{staticClass:"icon iconfont icon-xinzeng2"})])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.customerDetails||!t.customerDetails.Contacts||0===t.customerDetails.Contacts.length,expression:"!customerDetails||!customerDetails.Contacts||customerDetails.Contacts.length===0"}],staticClass:"noneContacts"},[i("span",[t._v("没有联系人")])]),t._l(t.customerDetails.Contacts,function(e,a){return i("div",{key:a,staticClass:"contactContent"},[i("crmLabel",{attrs:{title:"姓名",content:e.Name}}),i("crmLabel",{attrs:{title:"电话"}},[i("div",{staticClass:"contactTelephone"},[i("div",[t._v(t._s(e.Telephone?e.Telephone:"-"))]),i("div",{staticStyle:{padding:"0px 5px"},on:{click:function(a){a.stopPropagation(),t.dialPhoneNumber(e.Telephone)}}},[i("span",{staticClass:"icon iconfont icon-dianhua icon_iphone"})])])]),i("crmLabel",{attrs:{title:"邮件",content:e.Email}}),i("crmLabel",{attrs:{title:"部门",content:e.Department}}),i("crmLabel",{attrs:{title:"职位",content:e.Title}})],1)})],2),i("div",{staticClass:"contactContainer"},[i("div",{staticClass:"contactTitle van-hairline--bottom"},[i("div",{staticClass:"createHeader flexRowLayout van-hairline--bottom"},[i("div",{staticClass:"flexRowLayout",staticStyle:{"justify-content":"flex-start"}},[i("img",{attrs:{src:a("133e")}}),i("span",{staticClass:"headerText"},[t._v("客户归属")])])])]),t._l(t.customerDetails.Owners,function(t,e){return i("div",{key:e,staticClass:"contactContent"},[i("crmLabel",{attrs:{title:(t.DirectDept?t.DirectDept:"-")+">"+(t.SalesArea?t.SalesArea:"-"),content:t.Name}})],1)})],2)],1)],1),i("van-tab",{attrs:{title:"详细信息"}},[i("div",{staticClass:"vanTabContentContainer",style:{height:t.tabContentHeight+"px"}},[i("crmLabel",{attrs:{title:"注册地址 ",content:t.customerDetails.RegisterAddress}}),i("crmLabel",{attrs:{title:"信用代码 ",content:t.customerDetails.CreditCode}}),i("crmLabel",{attrs:{title:"信用代码到期",content:t.customerDetails.CreditCodeExpire}}),i("crmLabel",{attrs:{title:"生产许可证 ",content:t.customerDetails.ProduceLicense}}),i("crmLabel",{attrs:{title:"生产许可证到期 ",content:t.customerDetails.ProduceLicenseExpire}}),i("crmLabel",{attrs:{title:"经营许可证 ",content:t.customerDetails.BusinessLicense}}),i("crmLabel",{attrs:{title:"经营许可证到期 ",content:t.customerDetails.BusinessLicenseExpire}}),i("crmLabel",{attrs:{title:"注册资本 ",content:t.customerDetails.RegisteredCapital}}),i("crmLabel",{attrs:{title:"公司类型 ",content:t.customerDetails.CompanyType}}),i("crmLabel",{attrs:{title:"法人姓名",content:t.customerDetails.LegalPerson}}),i("crmLabel",{attrs:{title:"法人身份证",content:t.customerDetails.LegalPersonIdNumber}}),i("crmLabel",{attrs:{title:"法人住址 ",content:t.customerDetails.LegalPersonAddress}}),i("crmLabel",{attrs:{title:"开户银行 ",content:t.customerDetails.Bank}}),i("crmLabel",{attrs:{title:"银行账号 ",content:t.customerDetails.BankAccount}}),i("crmLabel",{attrs:{title:"信用额度 ",content:t.customerDetails.CreditLine}}),i("crmLabel",{attrs:{title:"自有产品结算方式 ",content:t.customerDetails.OwnerProductClose}}),i("crmLabel",{attrs:{title:"代理产品结算方式 ",content:t.customerDetails.AgencyProductClose}}),i("crmLabel",{attrs:{title:"公司网站 ",content:t.customerDetails.CompanySite}}),i("crmLabel",{attrs:{title:"经营地址 ",content:t.customerDetails.BusinessAddress}}),i("crmLabel",{attrs:{title:"经营场所面积 ",content:t.customerDetails.BusinessArea}}),i("crmLabel",{attrs:{title:"经营规模 ",content:t.customerDetails.BusinessScale}}),i("crmLabel",{attrs:{title:"技术情况 ",content:t.customerDetails.TechnicalSituation}}),i("crmLabel",{attrs:{title:"经营产品 ",content:t.customerDetails.BusinessProduction}}),i("crmLabel",{attrs:{title:"产品销售区域 ",content:t.customerDetails.ProductionSellArea}}),i("crmLabel",{attrs:{title:"经营我司产品 ",content:t.customerDetails.BusinessOwnerProduction}})],1)]),i("van-tab",{attrs:{title:"客户动态"}},[i("div",{staticClass:"vanTabContentContainer",style:{height:t.tabContentHeight+"px"}},[i("customerDynamic",{attrs:{customerId:t.customerId}})],1)]),i("van-tab",{attrs:{title:"相关资讯",disabled:""}})],1),i("van-tabbar",{attrs:{zIndex:101}},[i("van-tabbar-item",{staticClass:"bottomTabbarItem",on:{click:t.goCreateItem}},[i("span",{staticClass:"icon iconfont icon-todo",attrs:{slot:"icon"},slot:"icon"}),i("span",[t._v("创建事项")])]),i("van-tabbar-item",{staticClass:"bottomTabbarItem",on:{click:t.goVisitLocation}},[i("span",{staticClass:"icon iconfont icon-yibiaopan",attrs:{slot:"icon"},slot:"icon"}),i("span",[t._v("开始拜访")])])],1)],1)},n=[],s=a("c665"),o=a("dc0a"),r=a("aa9a"),c=a("d328"),l=a("11d9"),u=a("9ab4"),m=a("2b0e"),f=a("60a3"),d=a("3bbd8"),p=a("3cda"),h=a("46c4"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"filterContainer",on:{click:t.openFilterOptionPopup}},[i("span",[t._v(t._s(t.filterOptionText))]),i("span",{staticClass:"icon iconfont icon-xiangxia"})]),i("van-pull-refresh",{on:{refresh:t.loadDataList},model:{value:t.isLoadingRefresh,callback:function(e){t.isLoadingRefresh=e},expression:"isLoadingRefresh"}},[i("van-list",{staticClass:"crmVanList",attrs:{finished:t.finished,"immediate-check":!1,"finished-text":"没有更多了"},on:{load:t.loadNextDatas},model:{value:t.isLoadingNext,callback:function(e){t.isLoadingNext=e},expression:"isLoadingNext"}},t._l(t.dataList,function(e,n){return i("div",{key:n,staticStyle:{display:"flex","align-items":"center","border-bottom":"1px solid white"},on:{click:function(a){t.goDynamicDetails(e)}}},[i("van-col",{staticStyle:{"align-self":"flex-start"},attrs:{span:"3"}},[i("img",{staticClass:"headPortrait",attrs:{src:a("7f6f")}})]),i("van-col",{attrs:{span:"18"}},[i("div",{staticStyle:{padding:"5px 10px"}},[i("div",{staticClass:"dynamicHeader"},[i("span",[t._v(t._s(e.CreaterName)+" > "+t._s(t._f("formatDynamicType")(e.DynamicType)))]),i("van-tag",{directives:[{name:"show",rawName:"v-show",value:e.DynamicType===t.itemDynamicType,expression:"item.DynamicType===itemDynamicType"}],staticClass:"dynamicState",attrs:{round:"",color:t._f("formatItemStateColor")(e.State)}},[t._v(t._s(t._f("formatItemState")(e.State)))]),i("van-tag",{directives:[{name:"show",rawName:"v-show",value:e.DynamicType===t.visitDynamicType,expression:"item.DynamicType===visitDynamicType"}],staticClass:"dynamicState",attrs:{round:"",color:e.IsVisiting?"#3fcc8e":"#b2b2b2"}},[t._v(t._s(t._f("formatVisitState")(e.IsVisiting)))])],1),i("div",{staticClass:"dynamicContent"},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.DynamicType===t.itemDynamicType,expression:"item.DynamicType===itemDynamicType"}]},[t._v(t._s(e.Name))]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.DynamicType===t.visitDynamicType,expression:"item.DynamicType===visitDynamicType"}]},[t._v(t._s(e.Content))])]),i("div",{staticClass:"createTime"},[i("div",{staticClass:"subBottomText",attrs:{offset:"4",span:"6"}},[t._v(t._s(t._f("formatDateTime")(e.CreateTime)))])])])])],1)}))],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.showFilterOptionPopup,callback:function(e){t.showFilterOptionPopup=e},expression:"showFilterOptionPopup"}},[i("van-picker",{ref:"filterOptionPicker",attrs:{columns:t.filterOptionList,"show-toolbar":"",title:"请选择筛选条件"},on:{cancel:t.onPickPopupCancel,confirm:t.onPickPopupConfirm}})],1)],1)},v=[],y=a("9290"),g=a("2b67"),D=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.currentPage=1,t.pageSize=20,t.dataList=[],t.totalCount=0,t.showFilterOptionPopup=!1,t.filterOptionText="全部",t.filterOptionList=["全部","仅看拜访","仅看事项"],t.filterOptionValue=0,t.isLoadingRefresh=!1,t.isLoadingNext=!1,t.finished=!1,t.itemDynamicType="Item",t.visitDynamicType="Visit",t}return Object(r["a"])(e,[{key:"mounted",value:function(){var t=this;this.$nextTick(function(){t.initDataList()})}},{key:"onFilterOptionValueChange",value:function(t,e){this.loadDataList()}},{key:"onPickPopupConfirm",value:function(t,e){this.showFilterOptionPopup=!1,this.filterOptionText=t,this.filterOptionValue=e}},{key:"onPickPopupCancel",value:function(){this.showFilterOptionPopup=!1}},{key:"openFilterOptionPopup",value:function(){this.showFilterOptionPopup=!0}},{key:"initDataList",value:function(){this.dataList&&0!==this.dataList.length||this.loadDataList()}},{key:"getTotalPage",value:function(){return Math.ceil(this.totalCount/this.pageSize)}},{key:"loadDataList",value:function(){var t=this;console.log("****************************"),this.isLoadingRefresh=!1,this.isLoadingNext=!1,this.currentPage=1,this.queryCustomerDynamic(function(){t.isLoadingRefresh=!0},function(){t.isLoadingRefresh=!1})}},{key:"loadNextDatas",value:function(){var t=this;console.log(".............................");var e=this.getTotalPage();this.currentPage=this.currentPage+1,isNaN(e)||this.currentPage>e?this.finished=!0:this.queryCustomerDynamic(function(){t.isLoadingNext=!0},function(){t.isLoadingNext=!1})}},{key:"queryCustomerDynamic",value:function(t,e){var a=this,i=(this.currentPage-1)*this.pageSize;t(),this.$Api.invoke({moduleName:"crm.basic.customerDynamicService",className:"CustomerDynamicService",method:"getCustomerDynamics",args:{customerId:this.customerId,filterOption:this.filterOptionValue,skip:i,limit:this.pageSize}}).then(function(t){t.data&&t.data.isSuccess?a.queryCustomerDynamicSuccess(t):a.queryCustomerDynamicFailed(t)}).catch(function(t){a.queryCustomerDynamicException(t)}).finally(function(){e()})}},{key:"queryCustomerDynamicSuccess",value:function(t){console.log(t.data.data[1]),this.totalCount=t.data.data[0],console.log("当前页："+this.currentPage),console.log("总数"+this.totalCount);var e=this.getTotalPage();console.log("总页数"+e),isNaN(e)&&(this.finished=!0),this.currentPage>=e?this.finished=!0:this.finished=!1,t.data.data[1]&&(1===this.currentPage?this.dataList=t.data.data[1]:this.dataList=this.dataList.concat(t.data.data[1]))}},{key:"queryCustomerDynamicFailed",value:function(t){h["a"].toastMessage("查询客户动态失败!"+t.data.error)}},{key:"queryCustomerDynamicException",value:function(t){this.totalCount=0,this.dataList=[],this.finished=!0,h["a"].toastMessage("查询客户动态异常!"+t)}},{key:"goDynamicDetails",value:function(t){if(t&&t.Id&&t.DynamicType)if(t.DynamicType!==this.itemDynamicType){if(t.DynamicType===this.visitDynamicType){var e=g["a"].instance.getPersonId();if(t.CreaterId===e&&t.IsVisiting)return void this.goCreateVisit(t.Id);this.goVisitDetails(t.Id)}}else this.goItemDetails(t.Id)}},{key:"goVisitDetails",value:function(t){t&&this.$router.push({path:"/visitDetails",query:{visitId:t}})}},{key:"goCreateVisit",value:function(t){t&&this.$router.push({path:"/createVisit",query:{newVisitId:t}})}},{key:"goItemDetails",value:function(t){t&&this.$router.push({path:"/itemDetails",query:{id:t}})}}]),Object(o["a"])(e,t),e}(m["default"]);u["a"]([Object(f["d"])({default:""}),u["b"]("design:type",String)],D.prototype,"customerId",void 0),u["a"]([Object(f["f"])("filterOptionValue"),u["b"]("design:type",Function),u["b"]("design:paramtypes",[Object,Object]),u["b"]("design:returntype",void 0)],D.prototype,"onFilterOptionValueChange",null),D=u["a"]([Object(f["a"])({filters:{formatDateTime:function(t){return y["a"].formatDateTime(t,"yyyy-MM-dd hh:mm")},formatDynamicType:function(t){return"Item"===t?"事项":"Visit"===t?"拜访":"--"},formatVisitState:function(t){return y["a"].formatVisitState(t)},formatItemState:function(t){return y["a"].formatItemState(t)},formatItemStateColor:function(t){return y["a"].formatItemStateColor(t)}}})],D);var C=D,A=C,L=A,x=(a("428d"),a("506a"),a("2877")),I=Object(x["a"])(L,b,v,!1,null,"07143be8",null);I.options.__file="customerDynamic.vue";var w=I.exports,T=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.customerId="",t.customerDetails={},t.isBusy=!1,t.tabContentHeight=0,t}return Object(r["a"])(e,[{key:"created",value:function(){this.customerId=this.$route.query.id,this.getCustomerDetails()}},{key:"mounted",value:function(){this.tabContentHeight=document.documentElement.clientHeight-90-50,console.log("当前是客户详情界面.....")}},{key:"getCustomerDetails",value:function(){var t=this;this.isBusy=!0,this.$Api.invoke({moduleName:"crm.basic.customerService",className:"CustomerService",method:"getCustomerDetails",args:{customerId:this.customerId}}).then(function(e){e.data&&e.data.isSuccess?t.customerDetails=e.data.data:h["a"].toastMessage("查询客户详情出错!"+e.data.error)}).catch(function(t){h["a"].toastMessage("查询客户详情异常!"+t),console.log(t)}).finally(function(){t.isBusy=!1})}},{key:"goBack",value:function(){this.$router.back()}},{key:"goCreateItem",value:function(){this.customerDetails&&this.customerDetails.Id&&this.$router.push({path:"/createItem",query:{customerId:this.customerDetails.Id,customerName:this.customerDetails.Name}})}},{key:"goVisitLocation",value:function(){this.customerDetails&&this.customerDetails.Id&&this.$router.push({path:"/visitLocation",query:{customerId:this.customerDetails.Id,customerName:this.customerDetails.Name}})}},{key:"goCreateContact",value:function(){this.customerDetails&&this.customerDetails.Id&&this.$router.push({path:"/createContact",query:{customerId:this.customerDetails.Id}})}},{key:"dialPhoneNumber",value:function(t){t&&(window.location.href="tel:"+t)}}]),Object(o["a"])(e,t),e}(m["default"]);T=u["a"]([Object(f["a"])({components:{crmLabel:d["a"],crmLoading:p["a"],customerDynamic:w}})],T);var O=T,S=O,k=S,P=(a("a61e"),a("bd6e"),Object(x["a"])(k,i,n,!1,null,"4f57d552",null));P.options.__file="customerDetails.vue";e["default"]=P.exports},baf6:function(t,e,a){},bb8a:function(t,e,a){},bd6e:function(t,e,a){"use strict";var i=a("736f"),n=a.n(i);n.a},d956:function(t,e,a){"use strict";var i=a("bb8a"),n=a.n(i);n.a}}]);