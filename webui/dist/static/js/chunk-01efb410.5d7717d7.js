(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01efb410"],{"2f72":function(e,t,a){},"46c4":function(e,t,a){"use strict";var n=a("b970"),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom";Object(n["b"])({message:e,duration:t,position:a})},i=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=n["a"].alert({title:e,message:t,overlay:a,closeOnClickOverlay:!0});return s},o=function(e,t){var a=n["a"].confirm({title:e,message:t});return a},c={toastMessage:s,dialogAlert:i,dialogConfirm:o};t["a"]=c},"829b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{attrs:{id:"signinContainer"}},[e._m(0),a("div",{staticClass:"centerContainer",attrs:{id:"inputContainer"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.accountName,expression:"accountName"}],attrs:{type:"text",placeholder:"手机号/邮箱"},domProps:{value:e.accountName},on:{input:function(t){t.target.composing||(e.accountName=t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("div",{staticClass:"centerContainer",attrs:{id:"forgetContainer"}},[a("a",{on:{click:e.forgetPassword}},[a("span",[e._v("忘记密码？")])])]),a("div",{staticClass:"centerContainer",attrs:{id:"buttonContainer"}},[a("van-button",{staticClass:"centerContainer",attrs:{id:"signinbutton",size:"small",round:""},on:{click:e.signin}},[e._v("登录")])],1),a("div",{staticClass:"centerContainer",attrs:{id:"createContainer"}},[a("a",{on:{click:e.createAccount}},[a("span",[e._v("创建账号")])])])]),a("div",{staticClass:"centerContainer"},[a("van-loading",{directives:[{name:"show",rawName:"v-show",value:e.isBusy,expression:"isBusy"}],attrs:{id:"loadIndicator"}})],1)])])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"centerContainer",attrs:{id:"logoContainer"}},[n("img",{attrs:{src:a("f0d5")}})])}],i=(a("a481"),a("c665")),o=a("dc0a"),c=a("aa9a"),r=a("d328"),u=a("11d9"),d=a("9ab4"),l=a("2b0e"),v=a("60a3"),p=a("2b67"),g=a("46c4"),m=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(r["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.accountName="",e.password="",e.isBusy=!1,e}return Object(c["a"])(t,[{key:"created",value:function(){this.accountName=p["a"].instance.getAccountName()}},{key:"signin",value:function(){var e=this;this.checkUserInput()&&(this.isBusy=!0,this.$Api.invoke({moduleName:"crm.permission.signinService",className:"SigninService",method:"signin",args:{entCd:"SNS",signinName:this.accountName,password:this.password}}).then(function(t){t.data&&t.data.isSuccess?t.data.data?e.signinSuccessed(t.data.data):g["a"].toastMessage("用户名或密码错误!",2e3):(g["a"].toastMessage("登录失败!"+t.data.error,2e3),console.log(t))}).catch(function(e){g["a"].toastMessage("登录异常!"+e,2e3),console.log(e)}).finally(function(){e.isBusy=!1}))}},{key:"checkUserInput",value:function(){return!(!this.accountName||!this.password)||(g["a"].toastMessage("用户名或密码不能为空!"),!1)}},{key:"signinSuccessed",value:function(e){g["a"].toastMessage("登录成功",600),p["a"].instance.setEntId(e.EntId),p["a"].instance.setEntCd(e.EntCd),p["a"].instance.setPersonId(e.PersonId),p["a"].instance.setPersonName(e.PersonName),p["a"].instance.setAccountId(e.Id),p["a"].instance.setAccountName(e.SigninName),p["a"].instance.setIsLeader(e.IsLeader),p["a"].instance.setIsSalesPerson(e.IsSalesPerson),p["a"].instance.setSalesAreaId(e.SalesAreaId),p["a"].instance.setSalesArea(e.SalesArea),this.skipPage()}},{key:"forgetPassword",value:function(){g["a"].toastMessage("请联系管理员找回密码!",4e3)}},{key:"createAccount",value:function(){this.$router.push("/signup")}},{key:"skipPage",value:function(){this.$router.replace("/main/visit")}}]),Object(o["a"])(t,e),t}(l["default"]);m=d["a"]([v["a"]],m);var f=m,h=f,C=h,b=(a("b470"),a("2877")),w=Object(b["a"])(C,n,s,!1,null,"94bf9f56",null);w.options.__file="signin.vue";t["default"]=w.exports},b470:function(e,t,a){"use strict";var n=a("2f72"),s=a.n(n);s.a},f0d5:function(e,t,a){e.exports=a.p+"static/img/sns.28d88920.png"}}]);